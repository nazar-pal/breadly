# PowerSync Sync Rules
# This file defines which data is synced to which users

bucket_definitions:
  # Global data accessible to all authenticated users
  global:
    data:
      - SELECT code as id, code, symbol, name FROM currencies
      - SELECT * FROM exchange_rates

  # User-specific data
  user_data:
    parameters: SELECT request.user_id() as user_id
    data:
      # User preferences
      - SELECT user_id as id, user_id, default_currency, first_weekday, locale FROM user_preferences WHERE user_id = bucket.user_id

      # User's categories
      - SELECT * FROM categories WHERE user_id = bucket.user_id

      # User's budgets
      - SELECT * FROM budgets WHERE user_id = bucket.user_id

      # User's accounts
      - SELECT * FROM accounts WHERE user_id = bucket.user_id

      # User's transactions
      - SELECT * FROM transactions WHERE user_id = bucket.user_id

      # User's attachments
      - SELECT * FROM attachments WHERE user_id = bucket.user_id

      # Transaction attachments (sync all for user)
      - SELECT * FROM transaction_attachments WHERE user_id = bucket.user_id
