---- Custom SQL migration file, put your code below! --

/*
================================================================================
MIGRATION 0007: Seed Exchange Rates
================================================================================
Purpose: Populate the exchange_rates table with initial currency conversion rates.

Data Source:
  - API: fawazahmed0/currency-api (GitHub)
  - Endpoint: https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies/usd.json
  - Fallback: https://latest.currency-api.pages.dev/v1/currencies/usd.json
  - Rate date: 2025-12-27 (initial snapshot)
  - Total Exchange Rates: 162 USD-to-X pairs

How It's Generated:
  - Script: scripts/generate-exchange-rates-sql.ts
  - The script fetches USD-based rates from the API and filters to only include
    currencies from our ISO 4217 list (179 currencies total)
  - To regenerate: Run `bun run scripts/generate-exchange-rates-sql.ts` and update this file

Approach:
  - We store only USD-to-X exchange rates (162 pairs) instead of full cross-rates
  - Cross-currency conversions are calculated on-the-fly: A→B = (A→USD) × (USD→B)
  - This approach dramatically reduces storage (from 31,862 pairs to 162 pairs)
    while maintaining full conversion capability for all supported currencies

Schema Notes:
  - Base currency is always USD
  - Only currencies available in the API and present in our ISO 4217 list are included
  - Some ISO 4217 codes (fund codes, bond market units, etc.) don't have market rates
    and are excluded - this is expected and correct
  - Uses ON CONFLICT ... DO UPDATE SET rate = EXCLUDED.rate to allow safe re-runs
    and rate updates

Important:
  - Exchange rates should be periodically updated via API refresh
  - Rates are updated daily by the API provider
  - When updating this migration, document the date and count of rates generated
================================================================================
*/

INSERT INTO exchange_rates (base_currency, quote_currency, rate, rate_date)
VALUES
    ('USD', 'AED', 3.6725, '2025-12-27'),
    ('USD', 'AFN', 66.23368806, '2025-12-27'),
    ('USD', 'ALL', 81.74999469, '2025-12-27'),
    ('USD', 'AMD', 381.4838316, '2025-12-27'),
    ('USD', 'ANG', 1.80023077, '2025-12-27'),
    ('USD', 'AOA', 918.92635742, '2025-12-27'),
    ('USD', 'ARS', 1451.1965315, '2025-12-27'),
    ('USD', 'AUD', 1.49030255, '2025-12-27'),
    ('USD', 'AWG', 1.79, '2025-12-27'),
    ('USD', 'AZN', 1.69999976, '2025-12-27'),
    ('USD', 'BAM', 1.66098908, '2025-12-27'),
    ('USD', 'BBD', 2, '2025-12-27'),
    ('USD', 'BDT', 122.20619412, '2025-12-27'),
    ('USD', 'BGN', 1.66098908, '2025-12-27'),
    ('USD', 'BHD', 0.376, '2025-12-27'),
    ('USD', 'BIF', 2958.02035679, '2025-12-27'),
    ('USD', 'BMD', 1, '2025-12-27'),
    ('USD', 'BND', 1.284399, '2025-12-27'),
    ('USD', 'BOB', 6.91783949, '2025-12-27'),
    ('USD', 'BRL', 5.54352567, '2025-12-27'),
    ('USD', 'BSD', 1, '2025-12-27'),
    ('USD', 'BTN', 89.85743063, '2025-12-27'),
    ('USD', 'BWP', 13.14947056, '2025-12-27'),
    ('USD', 'BYN', 2.91500748, '2025-12-27'),
    ('USD', 'BZD', 2.01449578, '2025-12-27'),
    ('USD', 'CAD', 1.36740989, '2025-12-27'),
    ('USD', 'CDF', 2289.5, '2025-12-27'),
    ('USD', 'CHF', 0.78936537, '2025-12-27'),
    ('USD', 'CLP', 906.19309419, '2025-12-27'),
    ('USD', 'CNY', 7.00678858, '2025-12-27'),
    ('USD', 'COP', 3697.5603793, '2025-12-27'),
    ('USD', 'CRC', 495.45541342, '2025-12-27'),
    ('USD', 'CUC', 1, '2025-12-27'),
    ('USD', 'CUP', 23.98346933, '2025-12-27'),
    ('USD', 'CVE', 93.64682279, '2025-12-27'),
    ('USD', 'CZK', 20.59043198, '2025-12-27'),
    ('USD', 'DJF', 178.08, '2025-12-27'),
    ('USD', 'DKK', 6.34530793, '2025-12-27'),
    ('USD', 'DOP', 62.6991212, '2025-12-27'),
    ('USD', 'DZD', 129.50510776, '2025-12-27'),
    ('USD', 'EGP', 47.55418214, '2025-12-27'),
    ('USD', 'ERN', 15, '2025-12-27'),
    ('USD', 'ETB', 155.60614105, '2025-12-27'),
    ('USD', 'EUR', 0.84925023, '2025-12-27'),
    ('USD', 'FJD', 2.27141099, '2025-12-27'),
    ('USD', 'FKP', 0.74115077, '2025-12-27'),
    ('USD', 'GBP', 0.74115077, '2025-12-27'),
    ('USD', 'GEL', 2.69039326, '2025-12-27'),
    ('USD', 'GHS', 11.13496683, '2025-12-27'),
    ('USD', 'GIP', 0.74115077, '2025-12-27'),
    ('USD', 'GMD', 74.48136801, '2025-12-27'),
    ('USD', 'GNF', 8751.02835261, '2025-12-27'),
    ('USD', 'GTQ', 7.6605774, '2025-12-27'),
    ('USD', 'GYD', 208.71773157, '2025-12-27'),
    ('USD', 'HKD', 7.77145243, '2025-12-27'),
    ('USD', 'HNL', 26.36133762, '2025-12-27'),
    ('USD', 'HTG', 130.86447303, '2025-12-27'),
    ('USD', 'HUF', 328.60374718, '2025-12-27'),
    ('USD', 'IDR', 16771.88650474, '2025-12-27'),
    ('USD', 'ILS', 3.19310717, '2025-12-27'),
    ('USD', 'INR', 89.85743063, '2025-12-27'),
    ('USD', 'IQD', 1310.36460347, '2025-12-27'),
    ('USD', 'IRR', 41993.76981871, '2025-12-27'),
    ('USD', 'ISK', 125.68693612, '2025-12-27'),
    ('USD', 'JMD', 159.94224841, '2025-12-27'),
    ('USD', 'JOD', 0.709, '2025-12-27'),
    ('USD', 'JPY', 156.57437201, '2025-12-27'),
    ('USD', 'KES', 128.94045329, '2025-12-27'),
    ('USD', 'KGS', 87.46452299, '2025-12-27'),
    ('USD', 'KHR', 4008.33387078, '2025-12-27'),
    ('USD', 'KMF', 417.80372451, '2025-12-27'),
    ('USD', 'KPW', 900.03479253, '2025-12-27'),
    ('USD', 'KRW', 1445.52659541, '2025-12-27'),
    ('USD', 'KWD', 0.30715981, '2025-12-27'),
    ('USD', 'KYD', 0.83239865, '2025-12-27'),
    ('USD', 'KZT', 505.76081627, '2025-12-27'),
    ('USD', 'LAK', 21614.95150728, '2025-12-27'),
    ('USD', 'LBP', 89554.43268109, '2025-12-27'),
    ('USD', 'LKR', 309.58549065, '2025-12-27'),
    ('USD', 'LRD', 177.50204153, '2025-12-27'),
    ('USD', 'LSL', 16.66675891, '2025-12-27'),
    ('USD', 'LYD', 5.41240464, '2025-12-27'),
    ('USD', 'MAD', 9.10959843, '2025-12-27'),
    ('USD', 'MDL', 16.80708668, '2025-12-27'),
    ('USD', 'MGA', 4568.99338525, '2025-12-27'),
    ('USD', 'MKD', 52.26120991, '2025-12-27'),
    ('USD', 'MMK', 2100.00836075, '2025-12-27'),
    ('USD', 'MNT', 3556.00426022, '2025-12-27'),
    ('USD', 'MOP', 8.004596, '2025-12-27'),
    ('USD', 'MRU', 39.59609895, '2025-12-27'),
    ('USD', 'MUR', 45.96843219, '2025-12-27'),
    ('USD', 'MVR', 15.45782265, '2025-12-27'),
    ('USD', 'MWK', 1733.60677357, '2025-12-27'),
    ('USD', 'MXN', 17.90495315, '2025-12-27'),
    ('USD', 'MXV', 2.07011255, '2025-12-27'),
    ('USD', 'MYR', 4.04650193, '2025-12-27'),
    ('USD', 'MZN', 63.66172336, '2025-12-27'),
    ('USD', 'NAD', 16.66675891, '2025-12-27'),
    ('USD', 'NGN', 1450.9483173, '2025-12-27'),
    ('USD', 'NIO', 36.80395285, '2025-12-27'),
    ('USD', 'NOK', 10.01230412, '2025-12-27'),
    ('USD', 'NPR', 143.83928208, '2025-12-27'),
    ('USD', 'NZD', 1.71410178, '2025-12-27'),
    ('USD', 'OMR', 0.38454577, '2025-12-27'),
    ('USD', 'PAB', 1, '2025-12-27'),
    ('USD', 'PEN', 3.36438149, '2025-12-27'),
    ('USD', 'PGK', 4.31883423, '2025-12-27'),
    ('USD', 'PHP', 58.72052023, '2025-12-27'),
    ('USD', 'PKR', 280.26375464, '2025-12-27'),
    ('USD', 'PLN', 3.58079099, '2025-12-27'),
    ('USD', 'PYG', 6792.89469658, '2025-12-27'),
    ('USD', 'QAR', 3.64, '2025-12-27'),
    ('USD', 'RON', 4.32418618, '2025-12-27'),
    ('USD', 'RSD', 99.63198023, '2025-12-27'),
    ('USD', 'RUB', 78.71763978, '2025-12-27'),
    ('USD', 'RWF', 1456.51176796, '2025-12-27'),
    ('USD', 'SAR', 3.75, '2025-12-27'),
    ('USD', 'SBD', 8.13759765, '2025-12-27'),
    ('USD', 'SCR', 14.72565614, '2025-12-27'),
    ('USD', 'SDG', 600.16274127, '2025-12-27'),
    ('USD', 'SEK', 9.15978246, '2025-12-27'),
    ('USD', 'SGD', 1.284399, '2025-12-27'),
    ('USD', 'SHP', 0.74115077, '2025-12-27'),
    ('USD', 'SLE', 22.92487744, '2025-12-27'),
    ('USD', 'SOS', 570.50298259, '2025-12-27'),
    ('USD', 'SRD', 38.33547106, '2025-12-27'),
    ('USD', 'SSP', 4544.23698496, '2025-12-27'),
    ('USD', 'STN', 20.7829246, '2025-12-27'),
    ('USD', 'SVC', 8.75, '2025-12-27'),
    ('USD', 'SYP', 11058.41430062, '2025-12-27'),
    ('USD', 'SZL', 16.66675891, '2025-12-27'),
    ('USD', 'THB', 31.04329825, '2025-12-27'),
    ('USD', 'TJS', 9.25501091, '2025-12-27'),
    ('USD', 'TMT', 3.49833326, '2025-12-27'),
    ('USD', 'TND', 2.90965478, '2025-12-27'),
    ('USD', 'TOP', 2.40866459, '2025-12-27'),
    ('USD', 'TRY', 42.86244227, '2025-12-27'),
    ('USD', 'TTD', 6.7984379, '2025-12-27'),
    ('USD', 'TWD', 31.39955819, '2025-12-27'),
    ('USD', 'TZS', 2473.24923237, '2025-12-27'),
    ('USD', 'UAH', 42.11728429, '2025-12-27'),
    ('USD', 'UGX', 3611.97177167, '2025-12-27'),
    ('USD', 'UYU', 39.08641121, '2025-12-27'),
    ('USD', 'UZS', 12081.28691818, '2025-12-27'),
    ('USD', 'VED', 289.33663813, '2025-12-27'),
    ('USD', 'VES', 289.33663813, '2025-12-27'),
    ('USD', 'VND', 26383.41306397, '2025-12-27'),
    ('USD', 'VUV', 120.62097911, '2025-12-27'),
    ('USD', 'WST', 2.77087636, '2025-12-27'),
    ('USD', 'XAF', 557.07163268, '2025-12-27'),
    ('USD', 'XAG', 0.012633448, '2025-12-27'),
    ('USD', 'XAU', 0.0002206229, '2025-12-27'),
    ('USD', 'XCD', 2.70246525, '2025-12-27'),
    ('USD', 'XDR', 0.72921378, '2025-12-27'),
    ('USD', 'XOF', 557.07163268, '2025-12-27'),
    ('USD', 'XPD', 0.0005174732, '2025-12-27'),
    ('USD', 'XPF', 101.34250947, '2025-12-27'),
    ('USD', 'XPT', 0.000407751, '2025-12-27'),
    ('USD', 'YER', 238.40944193, '2025-12-27'),
    ('USD', 'ZAR', 16.66675891, '2025-12-27'),
    ('USD', 'ZMW', 22.54747881, '2025-12-27'),
    ('USD', 'ZWG', 26.02660001, '2025-12-27')
ON CONFLICT (base_currency, quote_currency, rate_date) DO UPDATE SET rate = EXCLUDED.rate;
